<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulate Landscape-Scale Floral Resource Dynamics • sweetworld</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Simulate Landscape-Scale Floral Resource Dynamics">
<meta property="og:description" content="Generates hypothetical landscapes, populates landscape with 
    simulated floral community, and models the temporal dynamics of floral
    reward based on a floral trait table and a simple model of floral phenology">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">sweetworld</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Together, flowering plants and flower-visiting animals account for about 1/3 of all described extant species of eukaryotic life on Earth. The trophic interface between flowers and florivores is, therefore, one of the chief foundations of global biodiversity, and patterns of floral resource availability can be expected to govern abundance, diversity, and functional relationships at higher trophic levels. <strong>sweetworld</strong> is a sandbox for exploring landscape-scale patterns of floral resource availability arising from simulated floral communities.</p>
<!-- ![Alt text](https://github.com/sponslerdb/sweetworld/blob/main/inst/extdata/model_schematic.png?raw=true "Title") -->
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>devtools::install_github("sponslerdb/sweetworld")</code></p>
</div>
<div class="section level2">
<h2 id="1-generate-landscape">1. Generate landscape<a class="anchor" aria-label="anchor" href="#1-generate-landscape"></a>
</h2>
<p>Landscape are generated with the function <code><a href="reference/landgen.html">landgen()</a></code>, which serves as a wrapper for functions in the package <code>landscapeR</code> (Masante 2017). At present, the function is hardcoded to produce a 3-class landscape (e.g. crop, forest, herbaceous), but I plan to make this more flexible in later versions of the package.</p>
<p>The following code produces a 100 x 100 cell raster (<code>area = 10000</code>); if each cell is taken to represent 1 m<sup>2</sup>, the result is a one hectare landscape. Class 0 represents the background matrix on which patches of class 1 and class 2 are generated. The proportional abundance of classes 1 and 2 are controlled by <code>prop1</code> and <code>prop2</code>, respectively, with the proportional abundance of class 0 equal to 1 - (<code>prop1</code> + <code>prop2</code>). The grain size of the landscape is controlled by <code>n1</code> and <code>n2</code>, which determine the number of patches over which the total area of class 1 and class 2 are distributed. Note that patches can become contiguous.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>land1 &lt;-<span class="st"> </span><span class="kw">landgen</span>(<span class="dt">area =</span> <span class="dv">10000</span>, </span>
<span id="cb1-2"><a href="#cb1-2"></a>                 <span class="dt">prop1 =</span> <span class="fl">0.6</span>, </span>
<span id="cb1-3"><a href="#cb1-3"></a>                 <span class="dt">prop2 =</span> <span class="fl">0.2</span>, </span>
<span id="cb1-4"><a href="#cb1-4"></a>                 <span class="dt">n1 =</span> <span class="dv">10</span>, </span>
<span id="cb1-5"><a href="#cb1-5"></a>                 <span class="dt">n2 =</span> <span class="dv">10</span>) </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="2-tabulate-landscape">2. Tabulate landscape<a class="anchor" aria-label="anchor" href="#2-tabulate-landscape"></a>
</h2>
<p>The next step is to tabulate the raster generated by <code>landgen</code>, simulate a floral community, and join that floral community to a table of floral traits. These steps are done by <code>landtab</code>.</p>
<p>Flora are assigned to landscape cells using the arguments <code>comp0</code>, <code>comp1</code>, and <code>comp2</code>, which control the floral composition of habitat classes 0, 1, and 2, respectively. In the simplest case, each habitat class could be assigned a single floral species. In most cases, though, we probably want to assign multiple species to one or more of the classes. In the code below, habitat class 1 is simulated as pure <em>Brassica napus</em>, representing oilseed rape fields, but classes 0 (representing non-crop herbaceous habitat) and 1 (representing forest) are assigned multiple species. If a habitat class is assigned multiple species, each landscape cell is assigned a single species drawn randomly from the vector of species assigned to the class to which it belongs. The relative abundance of each species within each class is controlled by the arguments <code>prob0</code>, <code>prob1</code>, and <code>prob2</code>, each of which consists of a vector of weights that govern the random sampling process. For ease of interpretation, these weights should sum to 1, but the base <code>R</code> function <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code> that works behind the scenes of <code>landtab</code> will accept any vector of weights and automatically rescale them.</p>
<p>Once a plant species has been assigned to each cell of the landscape (now formatted as a row in a data table), we can add floral traits from a table specified by <code>traitTab</code>. Of course, one’s choice of plant species above has to correspond to species present in the trait table. At minimum, this table must include the following traits:</p>
<ol style="list-style-type: decimal">
<li>Plant name (the name of this column can vary — see <code>plantNames</code> argument)</li>
<li>
<code>flower.density.peak</code> (flowers per square meter at peak bloom)</li>
<li>
<code>bloom.start</code> (end of bloom, day of year)</li>
<li>
<code>bloom.end</code> (end of bloom, day of year)</li>
<li>
<code>bloom.peak</code> (end of bloom, day of year)</li>
<li>
<code>sugar.per.flower</code> (micrograms of suger per flower per day)</li>
</ol>
<p>In this case, our trait table is <code>baude_traits</code> (shipped with the package), which is a modification of the trait table provided by Baude et al. (2016) (Supplemental Table 11). In addition to the required traits listed above, <code>baude_traits</code> includes a handful of functional traits that can be used to parse floral resource availability in ecologically meaningful ways. The argument <code>plantNames</code> simply gives the name of the column in the trait table that contains the plant names.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>land1_tab &lt;-<span class="st"> </span><span class="kw">landtab</span>(land1, </span>
<span id="cb2-2"><a href="#cb2-2"></a>                     <span class="dt">comp0 =</span> <span class="kw">c</span>(<span class="st">"Cirsium vulgare"</span>, <span class="st">"Trifolium repens"</span>, <span class="st">"Taraxacum agg."</span>),</span>
<span id="cb2-3"><a href="#cb2-3"></a>                     <span class="dt">comp1 =</span> <span class="kw">c</span>(<span class="st">"Brassica napus"</span>),</span>
<span id="cb2-4"><a href="#cb2-4"></a>                     <span class="dt">comp2 =</span> <span class="kw">c</span>(<span class="st">"Acer pseudoplatanus"</span>, <span class="st">"Crataegus monogyna"</span>, <span class="st">"Sorbus aucuparia"</span>),</span>
<span id="cb2-5"><a href="#cb2-5"></a>                     <span class="dt">prob0 =</span> <span class="kw">c</span>(<span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.3</span>),</span>
<span id="cb2-6"><a href="#cb2-6"></a>                     <span class="dt">prob1 =</span> <span class="kw">c</span>(<span class="dv">1</span>),</span>
<span id="cb2-7"><a href="#cb2-7"></a>                     <span class="dt">prob2 =</span> <span class="kw">c</span>(<span class="fl">0.8</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>),</span>
<span id="cb2-8"><a href="#cb2-8"></a>                     <span class="dt">traitTab =</span> baude_traits,</span>
<span id="cb2-9"><a href="#cb2-9"></a>                     <span class="dt">plantNames =</span> <span class="st">"name.latin"</span>)</span></code></pre></div>
<p>At this point, let’s pause and appreciate the beautiful world we’ve simulated.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Classes</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>plot1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(land1_tab, <span class="kw">aes</span>(x, y, <span class="dt">fill =</span> class)) <span class="op">+</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="st">  </span><span class="kw">geom_raster</span>() <span class="op">+</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dv">10</span>) <span class="op">+</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="st">  </span><span class="kw">scale_fill_viridis_d</span>() <span class="op">+</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">"Patch class"</span>, <span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="st">  </span><span class="kw">coord_fixed</span>()</span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co"># Plants</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>plot2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(land1_tab, <span class="kw">aes</span>(x, y, <span class="dt">fill =</span> plant)) <span class="op">+</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="st">  </span><span class="kw">geom_raster</span>() <span class="op">+</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dv">10</span>) <span class="op">+</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="st">  </span><span class="kw">scale_fill_viridis_d</span>(<span class="dt">option =</span> <span class="st">"inferno"</span>) <span class="op">+</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">"Plant sp."</span>, <span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="st">  </span><span class="kw">coord_fixed</span>()</span>
<span id="cb3-16"><a href="#cb3-16"></a></span>
<span id="cb3-17"><a href="#cb3-17"></a>plot1 <span class="op">/</span><span class="st"> </span>plot2</span></code></pre></div>
<p><img src="README_files/figure-markdown_strict/unnamed-chunk-4-1.png"></p>
</div>
<div class="section level2">
<h2 id="3-extend-landscape-through-time">3. Extend landscape through time<a class="anchor" aria-label="anchor" href="#3-extend-landscape-through-time"></a>
</h2>
<p>Now that we have simulated our floral communities in terms of composition, we need to vary the floral density of each plant species through time according to a function representing its phenology. This is the job of <code>landpheno</code>. First, it takes the tabulated landscape and performs a crossing join with a vector of time steps defined by the arguments <code>first</code> and <code>last</code>. By default, these take the values of 0 (Jan 1) and 364 (Dec 31), generating a time series representing daily intervals for one year. Then, it calculates a triangular density function (Carnell 2019) for each plant species using <code>bloom.start</code>, <code>bloom.peak</code>, and <code>bloom.end</code>. At <code>bloom.peak</code>, the function equals 1, and it declines linearly to 0 as it approach <code>bloom.start</code> and <code>bloom.end</code>. The value of this function is then multiplied by <code>flower.density.peak</code> for each plant species to calculate the floral density in each landscape cell on each day of the time series. Finally, flower density is multiplied by <code>sugar.per.flower</code> to get the total nectar sugar in each cell on each day.</p>
<p>This is the most computationally intensive step of the workflow, since it involves the generation of a data frame with (<code>last</code> - <code>first</code>) * <code>area</code> rows. For this reason, increasing the initial raster size beyond 100 x 100 is likely to cause memory problems relatively quickly. Simulating landscapes larger than 1 hectare could be achieved simply by imagining each cell to represent, say, 5 x 5 m and adjusting the interpretation of the model accordingly.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>land1_pheno &lt;-<span class="st"> </span><span class="kw">landpheno</span>(land1_tab, <span class="dt">first =</span> <span class="dv">0</span>, <span class="dt">last =</span> <span class="dv">364</span>) </span></code></pre></div>
<p>At this juncture, we can pause again for visualization. By taking the mean sugar availability of each patch over monthly intervals, we can generate a short time series of maps that illustrate how the spatial distribution of floral resource availability varies through the year.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>land1_pheno_nest &lt;-<span class="st"> </span>land1_pheno <span class="op">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw">group_by</span>(time, date) <span class="op">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="st">  </span><span class="kw">nest</span>() <span class="op">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="st">  </span><span class="kw">filter</span>(date <span class="op">==</span><span class="st"> "1970-03-01"</span> <span class="op">|</span><span class="st"> </span><span class="co"># when we convert day of year to date, it defaults to UNIX epoch</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="st">           </span>date <span class="op">==</span><span class="st"> "1970-04-01"</span> <span class="op">|</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="st">           </span>date <span class="op">==</span><span class="st"> "1970-05-01"</span> <span class="op">|</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="st">           </span>date <span class="op">==</span><span class="st"> "1970-06-01"</span> <span class="op">|</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="st">           </span>date <span class="op">==</span><span class="st"> "1970-07-01"</span> <span class="op">|</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="st">           </span>date <span class="op">==</span><span class="st"> "1970-08-01"</span> <span class="op">|</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="st">           </span>date <span class="op">==</span><span class="st"> "1970-09-01"</span> <span class="op">|</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="st">           </span>date <span class="op">==</span><span class="st"> "1970-10-01"</span>) <span class="op">%&gt;%</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="st">  </span><span class="kw">unnest</span>(<span class="dt">cols =</span> data)</span>
<span id="cb5-13"><a href="#cb5-13"></a></span>
<span id="cb5-14"><a href="#cb5-14"></a>land1_pheno_monthly_mean &lt;-<span class="st"> </span>land1_pheno <span class="op">%&gt;%</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="st">  </span><span class="kw">group_by</span>(x, y, month) <span class="op">%&gt;%</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean.sugar =</span> <span class="kw">mean</span>(sugar)) <span class="op">%&gt;%</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="st">  </span><span class="kw">filter</span>(month <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Mar"</span>, <span class="st">"Apr"</span>, <span class="st">"May"</span>, <span class="st">"Jun"</span>, </span>
<span id="cb5-18"><a href="#cb5-18"></a>                      <span class="st">"Jul"</span>, <span class="st">"Aug"</span>, <span class="st">"Sep"</span>, <span class="st">"Oct"</span>))</span>
<span id="cb5-19"><a href="#cb5-19"></a></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="kw">ggplot</span>(land1_pheno_monthly_mean, <span class="kw">aes</span>(x, y, <span class="dt">fill =</span> mean.sugar)) <span class="op">+</span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="st">  </span><span class="kw">geom_raster</span>() <span class="op">+</span></span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dv">12</span>) <span class="op">+</span></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="st">  </span><span class="co">#scale_fill_gradient(low = "white", high = "red") +</span></span>
<span id="cb5-24"><a href="#cb5-24"></a><span class="st">  </span><span class="kw">scale_fill_viridis_c</span>(<span class="dt">option =</span> <span class="st">"rocket"</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span></span>
<span id="cb5-25"><a href="#cb5-25"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">"Sugar (g)"</span>, <span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb5-26"><a href="#cb5-26"></a><span class="st">  </span><span class="kw">coord_fixed</span>() <span class="op">+</span></span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>month)</span></code></pre></div>
<p><img src="README_files/figure-markdown_strict/unnamed-chunk-6-1.png"></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># +</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#   facet_wrap(~month, ncol = 4)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="4-tally-landscape">4. Tally landscape<a class="anchor" aria-label="anchor" href="#4-tally-landscape"></a>
</h2>
<p>Finally, we can focus on temporal patterns of floral resources by tallying the total sugar availability of the landscape for each time step (i.e. day). The function <code>landtally</code> performs this operation, optionally parsing total sugar availability by a given <code>criterion</code> corresponding to a categorical variable in the trait table (e.g. botanical family, floral morphotype) or the variable <code>class</code> representing the habitat classes of the initial raster.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>land1_tally_agg &lt;-<span class="st"> </span><span class="kw">landtally</span>(land1_pheno)</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>land1_tally_class &lt;-<span class="st"> </span><span class="kw">landtally</span>(land1_pheno, <span class="dt">criterion =</span> class)</span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a>land1_tally_plant &lt;-<span class="st"> </span><span class="kw">landtally</span>(land1_pheno, <span class="dt">criterion =</span> plant)</span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a>land1_tally_morph &lt;-<span class="st"> </span><span class="kw">landtally</span>(land1_pheno, <span class="dt">criterion =</span> flower.shape) </span></code></pre></div>
<p>With these tallied data, we can visualize variation in resource availability using line or area plots.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">ggplot</span>(land1_tally_agg, <span class="kw">aes</span>(date, total.sugar)) <span class="op">+</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dv">16</span>) <span class="op">+</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">"%b"</span>) <span class="op">+</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Sugar (g)"</span>, <span class="dt">title =</span> <span class="st">"Aggregate"</span>)</span></code></pre></div>
<p><img src="README_files/figure-markdown_strict/unnamed-chunk-8-1.png"></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">ggplot</span>(land1_tally_class, <span class="kw">aes</span>(date, total.sugar, <span class="dt">color =</span> class)) <span class="op">+</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dv">16</span>) <span class="op">+</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">"%b"</span>) <span class="op">+</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Total sugar (g)"</span>, <span class="dt">color =</span> <span class="st">"Habitat class"</span>,</span>
<span id="cb9-6"><a href="#cb9-6"></a>       <span class="dt">title =</span> <span class="st">"By habitat class"</span>) </span></code></pre></div>
<p><img src="README_files/figure-markdown_strict/unnamed-chunk-8-2.png"></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">ggplot</span>(land1_tally_plant, <span class="kw">aes</span>(date, total.sugar, <span class="dt">color =</span> plant)) <span class="op">+</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dv">16</span>) <span class="op">+</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">"%b"</span>) <span class="op">+</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Total sugar (g)"</span>, <span class="dt">color =</span> <span class="st">"Plant sp."</span>,</span>
<span id="cb10-6"><a href="#cb10-6"></a>       <span class="dt">title =</span> <span class="st">"By plant species"</span>)</span></code></pre></div>
<p><img src="README_files/figure-markdown_strict/unnamed-chunk-8-3.png"></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">ggplot</span>(land1_tally_morph, <span class="kw">aes</span>(date, total.sugar, <span class="dt">color =</span> flower.shape)) <span class="op">+</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dv">16</span>) <span class="op">+</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">"%b"</span>) <span class="op">+</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Total sugar (g)"</span>, <span class="dt">color =</span> <span class="st">"Floral morphotype"</span>,</span>
<span id="cb11-6"><a href="#cb11-6"></a>       <span class="dt">title =</span> <span class="st">"By flower shape"</span>) </span></code></pre></div>
<p><img src="README_files/figure-markdown_strict/unnamed-chunk-8-4.png"></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">ggplot</span>(land1_tally_plant, <span class="kw">aes</span>(date, total.sugar, <span class="dt">fill =</span> plant)) <span class="op">+</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="st">  </span><span class="kw">geom_area</span>(<span class="dt">color =</span> <span class="st">"white"</span>) <span class="op">+</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dv">16</span>) <span class="op">+</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">"%b"</span>) <span class="op">+</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">  </span><span class="kw">scale_fill_viridis_d</span>(<span class="dt">option =</span> <span class="st">"inferno"</span>, <span class="dt">direction =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Total sugar (g)"</span>, <span class="dt">fill =</span> <span class="st">"Plant sp."</span>,</span>
<span id="cb12-7"><a href="#cb12-7"></a>       <span class="dt">title =</span> <span class="st">"By plant species"</span>) </span></code></pre></div>
<p><img src="README_files/figure-markdown_strict/unnamed-chunk-8-5.png"></p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Baude, Mathilde, William E Kunin, Nigel D Boatman, Simon Conyers, Nancy Davies, Mark A K Gillespie, R Daniel Morton, Simon M Smart, and Jane Memmott. 2016. “Historical Nectar Assessment Reveals the Fall and Rise of Floral Resources in Britain.” <em>Nature</em> 530 (7588): 85–88.</p>
<p>Carnell, Rob. 2019. <em>Triangle: Provides the Standard Distribution Functions for the Triangle Distribution</em>. <a href="https://CRAN.R-project.org/package=triangle" class="external-link uri">https://CRAN.R-project.org/package=triangle</a>.</p>
<p>Masante, Dario. 2017. <em>landscapeR: Categorical Landscape Simulation Facility</em>. <a href="https://CRAN.R-project.org/package=landscapeR" class="external-link uri">https://CRAN.R-project.org/package=landscapeR</a>.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>CCA</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing sweetworld</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Douglas B. Sponsler <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/sponslerdb/sweetworld/actions" class="external-link"><img src="https://github.com/sponslerdb/sweetworld/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Douglas B. Sponsler.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
